pipeline{

agent any

stages{

    stage('Build'){
        steps{
            withMaven(maven : 'maven_3_8_6'){
                sh 'mvn clean install -Dcucumber.filter.tags="${tags}" -Dtestenv="${env}"'
            }
        }
    }

    stage('Cucumber Reports'){
        steps{
            cucumber buildStatus: "SUCCESS",
            fileIncludePattern: "**/cucumber.json",
            jsonReportDirectory: 'target'
        }
    }
}

}